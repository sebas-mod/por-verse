import fs from 'fs'
import fetch from 'node-fetch'

const file = './database/pokemon.json'

async function actualizarPokemons() {
  let res = await fetch('https://pokeapi.co/api/v2/pokemon?limit=151') // primera generaciÃ³n
  let data = await res.json()
  let lista = {}

  for (let p of data.results) {
    let info = await fetch(p.url).then(r => r.json())
    lista[info.name] = {
      id: info.id,
      nombre: info.name.charAt(0).toUpperCase() + info.name.slice(1),
      tipo: info.types.map(t => t.type.name),
      nivel: 5,
      ataques: info.moves.slice(0, 4).map(a => a.move.name),
      imagen: info.sprites.front_default
    }
    console.log(`âœ… Guardado ${info.name}`)
  }

  fs.writeFileSync(file, JSON.stringify(lista, null, 2))
  console.log('ğŸ—‚ï¸ PokÃ©mon guardados en database/pokemon.json')
}

actualizarPokemons()
